<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration - WESO | MMUST CU</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Additional styles for registration page */
    .form-container {
      max-width: 700px;
      margin: 0 auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #333;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: border-color 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
    }
    
    .radio-group {
      display: flex;
      gap: 2rem;
      margin-top: 0.5rem;
    }
    
    .radio-group label {
      display: flex;
      align-items: center;
      font-weight: normal;
      cursor: pointer;
    }
    
    .radio-group input[type="radio"] {
      width: auto;
      margin-right: 0.5rem;
    }
    
    .submit-button {
      background: linear-gradient(135deg, var(--gold), #d4a017);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .submit-button:hover {
      background: linear-gradient(135deg, #d4a017, var(--gold));
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
    }
    
    .submit-button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .bible-verse {
      text-align: center;
      font-style: italic;
      color: #555;
      font-size: 1.2rem;
      padding: 2rem;
      border-radius: 10px;
      background: rgba(212, 175, 55, 0.1);
      max-width: 600px;
      margin: 3rem auto 0;
    }
    
    .reference {
      margin-top: 0.5rem;
      font-weight: 600;
      color: var(--gold);
    }
    
    .message-alert {
      padding: 15px;
      margin: 1rem 0;
      border-radius: 5px;
      text-align: center;
      font-weight: 500;
      display: none;
    }
    
    .message-success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .message-error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .required::after {
      content: " *";
      color: #dc3545;
    }
    
    @media (max-width: 768px) {
      .form-container {
        padding: 1.5rem;
      }
      
      .radio-group {
        flex-direction: column;
        gap: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="https://mmustcu.org/img/wesoLogo.jfif" alt="WESO Logo">
        <h2>WESO</h2>
      </div>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="wings.html">Wings</a></li>
        <li><a href="media.html">Media</a></li>
        <li><a href="events.html">Events</a></li>
        <li><a href="register.html" class="active">Registration</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <div class="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <section class="section" style="padding-top: 8rem; background: #f5f5f5; min-height: 100vh;">
    <div class="container">
      <h2 class="section-title fade-in">Join WESO</h2>
      <p style="text-align: center; max-width: 700px; margin: 0 auto 2rem; font-size: 1.1rem;" class="fade-in">
        Take the first step in joining a community of passionate soul winners. Fill out the form below and we'll contact you with more details about how you can serve!
      </p>

      <!-- Message Display Area -->
      <div id="messageContainer" class="message-alert" style="max-width: 700px; margin: 0 auto;"></div>

      <div class="form-container fade-in">
        <form id="wesoForm">
          <div class="form-group">
            <label for="full_name" class="required">Full Name</label>
            <input type="text" id="full_name" name="full_name" required placeholder="Enter your full name">
          </div>

          <div class="form-group">
            <label for="email_address" class="required">Email Address</label>
            <input type="email" id="email_address" name="email_address" required placeholder="Enter your email address">
          </div>

          <div class="form-group">
            <label for="phone_number" class="required">Phone Number</label>
            <input type="tel" id="phone_number" name="phone_number" required placeholder="Enter your phone number">
          </div>

          <div class="form-group">
            <label class="required">Gender</label>
            <div class="radio-group">
              <label>
                <input type="radio" name="gender" value="Male" required>
                Male
              </label>
              <label>
                <input type="radio" name="gender" value="Female" required>
                Female
              </label>
            </div>
          </div>

          <div class="form-group">
            <label for="church_fellowship" class="required">Church / Fellowship</label>
            <input type="text" id="church_fellowship" name="church_fellowship" required placeholder="Enter your church or fellowship name">
          </div>

          <div class="form-group">
            <label for="ministry_interest" class="required">Area of Ministry Interest</label>
            <select id="ministry_interest" name="ministry_interest" required>
              <option value="">Select a ministry wing</option>
              <option value="Evangelism Team">Evangelism Team</option>
              <option value="Media Team">Media Team</option>
              <option value="Hospital Ministry">Hospital Ministry</option>
              <option value="Prison Ministry">Prison Ministry</option>
              <option value="Market Outreach">Market Outreach</option>
              <option value="Follow-up & Discipleship">Follow-up & Discipleship</option>
              <option value="Music & Worship">Music & Worship</option>
              <option value="Prayer Team">Prayer Team</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="testimony">Short Testimony or Why You Want to Join</label>
            <textarea id="testimony" name="testimony" rows="5" placeholder="Share your heart for ministry..."></textarea>
          </div>

          <button type="submit" class="submit-button">Submit Registration</button>
          
          <div style="text-align: center; margin-top: 1rem; color: #666; font-size: 0.9rem;">
            <p>By registering, you agree to receive updates about WESO activities.</p>
          </div>
        </form>
      </div>

      <div class="bible-verse fade-in" style="margin-top: 3rem;">
        "How beautiful are the feet of those who bring good news!"
        <div class="reference">‚Äî Romans 10:15</div>
      </div>
      
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>About WESO</h3>
          <p>Western Outreach Ministries is the evangelism department of Masinde Muliro University Christian Union, dedicated to winning souls for Christ across Western Kenya.</p>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="wings.html">Our Wings</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="register.html">Register</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Contact Info</h3>
          <p>üìç Masinde Muliro University of Science and Technology</p>
          <p>Kakamega, Kenya</p>
          <p>üìß Wesommust001@gmail.com</p>
          <p>üì± +254 712 345 678</p>
        </div>
        <div class="footer-section">
          <h3>Connect With Us</h3>
          <div class="social-icons">
            <a href="https://facebook.com/wesommust" target="_blank">f</a>
            <a href="https://instagram.com/wesommust" target="_blank">üì∑</a>
            <a href="https://youtube.com" target="_blank">‚ñ∂Ô∏è</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Western Outreach Ministries (WESO) - MMUST CU. All rights reserved.</p>
        <p>Powered by <strong>Godswill Web Solutions</strong></p>
      </div>
    </div>
  </footer>

  <script src="js/script.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('wesoForm');
    const messageContainer = document.getElementById('messageContainer');
    
    // Function to show message
    function showMessage(message, type = 'success') {
      messageContainer.innerHTML = message;
      messageContainer.className = `message-alert message-${type}`;
      messageContainer.style.display = 'block';
    }
    
    // Form submission
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const submitButton = form.querySelector('.submit-button');
      const originalText = submitButton.textContent;
      submitButton.textContent = 'Submitting...';
      submitButton.disabled = true;
      
      // Get form data
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      
      try {
          response = await fetch('php/register.php', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
          });
        } catch (error1) {
          // Method 2: FormData
          response = await fetch('php/register.php', {
            method: 'POST',
            body: formData
          });
        }
        
        // Read response text first
        const text = await response.text();
        
        // Try to parse as JSON
        let result;
        try {
          result = JSON.parse(text);
        } catch (jsonError) {
          showMessage("‚ùå Server returned invalid response: " + text.substring(0, 200), "error");
          return;
        }
        
        if (result.success) {
          showMessage(`‚úÖ ${result.message}<br>Your registration ID: ${result.id}`, "success");
          form.reset();
        } else {
          showMessage(`‚ùå ${result.message}`, "error");
        }
        
      } catch (error) {
        console.error("Network error details:", error);
        
        // Check if file exists
        try {
          const check = await fetch('php/register.php');
        } catch (fileError) {
          showMessage("‚ùå php/register.php file not found. Make sure it's in the php folder.", "error");
          return;
        }
        
        showMessage('‚ùå Network error: ' + error.message, 'error');
      } finally {
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      }
    });
  });
</script>
</body>
</html>