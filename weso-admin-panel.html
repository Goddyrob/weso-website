<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Admin Media - WESO | MMUST CU</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    .admin-tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #ddd;
      padding-bottom: 1rem;
      flex-wrap: wrap;
    }
    
    .admin-tab {
      padding: 10px 20px;
      background: #f8f9fa;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .admin-tab:hover {
      background: #e9ecef;
    }
    
    .admin-tab.active {
      background: var(--gold);
      color: white;
      box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
    }
    
    .admin-section {
      display: none;
    }
    
    .admin-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .add-btn {
      background: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .add-btn:hover {
      background: #218838;
      transform: translateY(-2px);
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      margin-top: 1rem;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
      border-radius: 10px;
      overflow: hidden;
    }
    
    .data-table th, .data-table td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }
    
    .data-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #333;
    }
    
    .status-active {
      color: #28a745;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .status-inactive {
      color: #dc3545;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .action-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .action-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    
    .edit-btn { 
      background: #007bff; 
      color: white; 
    }
    .edit-btn:hover { background: #0056b3; }
    
    .delete-btn { 
      background: #dc3545; 
      color: white; 
    }
    .delete-btn:hover { background: #c82333; }
    
    .toggle-btn { 
      background: #6c757d; 
      color: white; 
    }
    .toggle-btn:hover { background: #545b62; }
    
    .view-btn { 
      background: #17a2b8; 
      color: white; 
    }
    .view-btn:hover { background: #138496; }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
      animation: fadeIn 0.3s ease;
    }
    
    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--gold);
    }
    
    .close-modal {
      background: #dc3545;
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #333;
    }
    
    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      transition: border 0.3s ease;
    }
    
    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
    }
    
    .form-group small {
      display: block;
      margin-top: 5px;
      color: #666;
      font-size: 0.9rem;
    }
    
    .form-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      justify-content: flex-end;
    }
    
    .save-btn {
      background: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .save-btn:hover {
      background: #218838;
      transform: translateY(-2px);
    }
    
    .cancel-btn {
      background: #6c757d;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .cancel-btn:hover {
      background: #545b62;
    }
    
    .loading {
      text-align: center;
      padding: 2rem;
      color: #666;
    }
    
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid var(--gold);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .empty-state {
      text-align: center;
      padding: 3rem;
      color: #666;
      background: #f8f9fa;
      border-radius: 10px;
      margin-top: 1rem;
    }
    
    .message {
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 5px;
      display: none;
    }
    
    .message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      display: block;
    }
    
    .message.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
      display: block;
    }
    
    /* Responsive Design */
    @media (max-width: 968px) {
      .admin-container {
        padding: 1rem;
      }
      
      .nav-menu {
        position: fixed;
        left: -100%;
        top: 70px;
        flex-direction: column;
        background: var(--navy-blue);
        width: 100%;
        text-align: center;
        transition: 0.3s;
        padding: 2rem 0;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      }

      .nav-menu.active {
        left: 0;
      }

      .hamburger {
        display: flex;
      }

      .admin-tabs {
        flex-direction: column;
        gap: 0.5rem;
      }

      .admin-tab {
        width: 100%;
        text-align: center;
        padding: 12px 16px;
        font-size: 0.9rem;
      }

      .data-table {
        font-size: 0.9rem;
      }

      .data-table th, .data-table td {
        padding: 8px 6px;
      }

      .action-buttons {
        flex-direction: column;
        gap: 4px;
      }

      .action-btn {
        padding: 4px 8px;
        font-size: 0.8rem;
      }

      .modal-content {
        margin: 10px;
        max-width: none;
        width: calc(100vw - 20px);
        max-height: calc(100vh - 20px);
        overflow-y: auto;
      }

      .form-row {
        flex-direction: column;
        gap: 1rem;
      }

      .form-group {
        width: 100%;
      }
    }

    @media (max-width: 768px) {
      .admin-container {
        padding: 0.75rem;
      }

      h1 {
        font-size: 1.8rem;
        margin-bottom: 1rem;
      }

      .admin-tabs {
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
      }

      .data-table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .data-table th, .data-table td {
        min-width: 120px;
        padding: 6px 4px;
        font-size: 0.85rem;
      }

      .data-table th:first-child,
      .data-table td:first-child {
        min-width: 60px;
        position: sticky;
        left: 0;
        background: #f8f9fa;
        z-index: 1;
      }

      .data-table th:last-child,
      .data-table td:last-child {
        min-width: 150px;
      }

      .add-btn {
        width: 100%;
        justify-content: center;
        padding: 12px 16px;
        font-size: 1rem;
      }

      .modal-content {
        padding: 1rem;
        margin: 5px;
        width: calc(100vw - 10px);
      }

      .modal-header h2 {
        font-size: 1.3rem;
      }

      .modal-body {
        padding: 1.5rem 1rem;
      }

      input[type="text"], input[type="url"], textarea, select {
        font-size: 16px; /* Prevents zoom on iOS */
      }

      .form-buttons {
        flex-direction: column;
        gap: 0.5rem;
      }

      .form-buttons button {
        width: 100%;
        padding: 12px;
        font-size: 1rem;
      }
    }

    @media (max-width: 480px) {
      .admin-container {
        padding: 0.5rem;
      }

      h1 {
        font-size: 1.5rem;
        text-align: center;
      }

      .nav-logo h2 {
        font-size: 1.2rem;
      }

      .nav-menu {
        top: 60px;
        padding: 1.5rem 0;
      }

      .admin-tabs {
        gap: 0.25rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
      }

      .admin-tab {
        padding: 10px 12px;
        font-size: 0.85rem;
      }

      .admin-tab i {
        margin-right: 6px;
      }

      /* Mobile card layout for data tables */
      .data-table {
        display: none; /* Hide table on very small screens */
      }

      .mobile-cards {
        display: block;
      }

      .data-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        margin-bottom: 1rem;
        padding: 1rem;
        border-left: 4px solid var(--gold);
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #eee;
      }

      .card-title {
        font-weight: 600;
        color: var(--navy-blue);
        font-size: 1rem;
      }

      .card-id {
        background: var(--gold);
        color: var(--navy-blue);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 600;
      }

      .card-content {
        display: grid;
        grid-template-columns: 1fr;
        gap: 0.5rem;
        font-size: 0.85rem;
      }

      .card-field {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .card-label {
        font-weight: 600;
        color: #666;
        min-width: 80px;
      }

      .card-value {
        flex: 1;
        text-align: right;
        word-break: break-word;
      }

      .card-actions {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
        padding-top: 0.75rem;
        border-top: 1px solid #eee;
        flex-wrap: wrap;
      }

      .card-actions .action-btn {
        flex: 1;
        min-width: 80px;
        padding: 8px 6px;
        font-size: 0.8rem;
      }

      .status-active, .status-inactive {
        font-size: 0.8rem;
      }

      .modal-content {
        margin: 2px;
        width: calc(100vw - 4px);
        padding: 0.75rem;
      }

      .modal-header h2 {
        font-size: 1.1rem;
      }

      .modal-body {
        padding: 1rem 0.75rem;
      }

      .form-group label {
        font-size: 0.9rem;
        margin-bottom: 0.25rem;
      }

      input[type="text"], input[type="url"], textarea, select {
        padding: 8px 10px;
        font-size: 16px; /* Prevents zoom on iOS */
      }

      .add-btn, .submit-button {
        padding: 10px 12px;
        font-size: 0.9rem;
      }

      .message {
        font-size: 0.9rem;
        padding: 8px 12px;
      }
    }

    /* Cross-browser compatibility */
    .data-table {
      -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    }

    .modal-content {
      -webkit-transform: translateZ(0); /* Hardware acceleration for smoother animations */
      transform: translateZ(0);
    }

    /* High DPI displays */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .nav-logo img {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
      }
    }

    /* Touch-friendly interactions for mobile */
    .action-btn, .add-btn, .submit-button, .admin-tab {
      -webkit-tap-highlight-color: rgba(212, 175, 55, 0.2);
      touch-action: manipulation;
    }

    /* Better focus states for keyboard navigation */
    .action-btn:focus, .add-btn:focus, .submit-button:focus, .admin-tab:focus {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
    }

    /* Prevent text selection on buttons */
    .action-btn, .add-btn, .submit-button, .admin-tab {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Smooth transitions for all interactive elements */
    .action-btn, .add-btn, .submit-button, .admin-tab, .modal-content {
      -webkit-transition: all 0.3s ease;
      transition: all 0.3s ease;
    }

    /* Cross-browser box-sizing reset */
    *, *::before, *::after {
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }

    /* Better font rendering */
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
    
    /* Hamburger Menu */
    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      padding: 0.5rem;
    }

    .hamburger .bar {
      width: 25px;
      height: 3px;
      background: var(--white);
      margin: 3px 0;
      transition: 0.3s;
      border-radius: 2px;
    }

    .hamburger.active .bar:nth-child(1) {
      transform: rotate(-45deg) translate(-5px, 6px);
    }

    .hamburger.active .bar:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active .bar:nth-child(3) {
      transform: rotate(45deg) translate(-5px, -6px);
    }

    /* Admin Login Modal Styles */
    #admin-login-modal .modal-content {
      background: white;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-width: 400px;
      width: 90%;
      margin: 20px;
      position: relative;
      -webkit-transform: translateZ(0); /* Hardware acceleration */
      transform: translateZ(0);
    }

    #admin-login-modal .modal-header {
      text-align: center;
      padding-bottom: 1rem;
      border-bottom: 1px solid #eee;
    }

    #admin-login-modal .modal-header h2 {
      color: #333;
      margin: 0;
      font-size: 1.5rem;
    }

    #admin-login-modal .modal-body {
      padding: 2rem;
    }

    #admin-login-modal input[type="password"] {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      margin-top: 10px;
      box-sizing: border-box;
      font-size: 16px; /* Prevents zoom on iOS */
      -webkit-appearance: none; /* Removes iOS styling */
      appearance: none;
    }

    #admin-login-modal input[type="password"]:focus {
      border-color: var(--gold);
      outline: none;
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
    }

    #admin-login-modal .submit-button {
      background: var(--gold);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      width: 100%;
      margin-top: 15px;
      transition: all 0.3s ease;
      -webkit-tap-highlight-color: rgba(212, 175, 55, 0.2);
      touch-action: manipulation;
      font-weight: 600;
    }

    #admin-login-modal .submit-button:hover {
      background: #b8860b;
      transform: translateY(-1px);
    }

    #admin-login-modal .submit-button:active {
      transform: translateY(0);
    }

    /* Responsive Login Modal */
    @media (max-width: 968px) {
      #admin-login-modal .modal-content {
        max-width: 450px;
        margin: 15px;
        width: calc(100vw - 30px);
      }

      #admin-login-modal .modal-body {
        padding: 1.5rem;
      }

      #admin-login-modal .modal-header h2 {
        font-size: 1.4rem;
      }
    }

    @media (max-width: 768px) {
      #admin-login-modal .modal-content {
        max-width: none;
        width: calc(100vw - 20px);
        margin: 10px;
        border-radius: 8px;
      }

      #admin-login-modal .modal-body {
        padding: 1.5rem 1rem;
      }

      #admin-login-modal .modal-header h2 {
        font-size: 1.3rem;
      }

      #admin-login-modal input[type="password"] {
        padding: 14px 12px;
        font-size: 16px; /* Prevents zoom on iOS */
      }

      #admin-login-modal .submit-button {
        padding: 14px 20px;
        font-size: 1.1rem;
      }
    }

    @media (max-width: 480px) {
      #admin-login-modal .modal-content {
        width: calc(100vw - 10px);
        margin: 5px;
        border-radius: 6px;
        max-height: calc(100vh - 10px);
        overflow-y: auto;
      }

      #admin-login-modal .modal-body {
        padding: 1.25rem 0.75rem;
      }

      #admin-login-modal .modal-header {
        padding: 1rem 0.75rem 0.75rem;
      }

      #admin-login-modal .modal-header h2 {
        font-size: 1.1rem;
      }

      #admin-login-modal input[type="password"] {
        padding: 12px 10px;
        font-size: 16px; /* Prevents zoom on iOS */
        border-width: 1px;
      }

      #admin-login-modal .submit-button {
        padding: 12px 16px;
        font-size: 1rem;
        margin-top: 12px;
      }

      #admin-login-modal label {
        font-size: 0.9rem;
        font-weight: 600;
      }

      #login-error {
        font-size: 0.85rem;
        margin-top: 8px;
      }
    }

    /* Landscape orientation on small screens */
    @media (max-height: 500px) and (orientation: landscape) {
      #admin-login-modal .modal-content {
        max-height: calc(100vh - 10px);
        overflow-y: auto;
      }

      #admin-login-modal .modal-body {
        padding: 1rem 0.75rem;
      }
    }

    /* Focus states for accessibility */
    #admin-login-modal input[type="password"]:focus,
    #admin-login-modal .submit-button:focus {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
    }

    /* Loading state for submit button */
    #admin-login-modal .submit-button.loading {
      opacity: 0.7;
      cursor: not-allowed;
      position: relative;
    }

    #admin-login-modal .submit-button.loading::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      margin: auto;
      border: 2px solid transparent;
      border-top-color: #ffffff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Screen reader only content */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Additional responsive improvements */
    @media (max-width: 360px) {
      #admin-login-modal .modal-content {
        width: calc(100vw - 5px);
        margin: 2px;
      }

      #admin-login-modal .modal-body {
        padding: 1rem 0.5rem;
      }

      #admin-login-modal .modal-header h2 {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Admin Login Modal -->
  <div id="admin-login-modal" class="modal" style="display: block;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Admin Access Required</h2>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="admin-password">Enter Admin Password:</label>
          <input type="password" id="admin-password" placeholder="Enter password" autocomplete="current-password">
        </div>
        <button id="admin-login-btn" class="submit-button">Access Admin Panel</button>
        <div id="login-error" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- Main Admin Content (hidden initially) -->
  <div id="admin-content" style="display: none;">
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="https://mmustcu.org/img/wesoLogo.jfif" alt="WESO Logo">
        <h2>WESO Admin</h2>
      </div>
      <div class="hamburger" onclick="toggleMenu()">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="media.html">Media</a></li>
        <li><a href="weso-admin-panel.html" class="active">Admin</a></li>
        <li><a href="logout.php">Logout</a></li>
      </ul>
    </div>
  </nav>

  <section class="section" style="padding-top: 8rem;">
    <div class="admin-container">
      <h1>Media Management</h1>
      
      <!-- Success/Error Messages -->
      <div id="message" class="message"></div>
      
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="switchAdminTab('albums')">
          <i class="fas fa-images"></i> Photo Albums
        </button>
        <button class="admin-tab" onclick="switchAdminTab('sermons')">
          <i class="fas fa-book-bible"></i> Sermons
        </button>
        <button class="admin-tab" onclick="switchAdminTab('articles')">
          <i class="fas fa-newspaper"></i> Articles
        </button>
        <button class="admin-tab" onclick="switchAdminTab('videos')">
          <i class="fas fa-video"></i> Videos
        </button>
      </div>
      
      <!-- Albums Management -->
      <div id="albums-admin" class="admin-section active">
        <button class="add-btn" onclick="openAlbumModal()">
          <i class="fas fa-plus"></i> Add Album
        </button>
        <div id="albums-loading" class="loading">
          <div class="spinner"></div>
          <p>Loading albums...</p>
        </div>
        <div id="albums-content" style="display: none;">
          <table class="data-table" id="albums-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Folder ID</th>
                <th>Category</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="albums-list"></tbody>
          </table>
          <div class="mobile-cards" id="albums-cards" style="display: none;"></div>
        </div>
        <div id="no-albums" class="empty-state" style="display: none;">
          <h3>No albums yet</h3>
          <p>Add your first album to get started.</p>
        </div>
      </div>
      
      <!-- Sermons Management -->
      <div id="sermons-admin" class="admin-section">
        <button class="add-btn" onclick="openSermonModal()">
          <i class="fas fa-plus"></i> Add Sermon
        </button>
        <div id="sermons-loading" class="loading">
          <div class="spinner"></div>
          <p>Loading sermons...</p>
        </div>
        <div id="sermons-content" style="display: none;">
          <table class="data-table" id="sermons-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Speaker</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="sermons-list"></tbody>
          </table>
          <div class="mobile-cards" id="sermons-cards" style="display: none;"></div>
        </div>
        <div id="no-sermons" class="empty-state" style="display: none;">
          <h3>No sermons yet</h3>
          <p>Add your first sermon to get started.</p>
        </div>
      </div>
      
      <!-- Articles Management -->
      <div id="articles-admin" class="admin-section">
        <button class="add-btn" onclick="openArticleModal()">
          <i class="fas fa-plus"></i> Add Article
        </button>
        <div id="articles-loading" class="loading">
          <div class="spinner"></div>
          <p>Loading articles...</p>
        </div>
        <div id="articles-content" style="display: none;">
          <table class="data-table" id="articles-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Author</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="articles-list"></tbody>
          </table>
          <div class="mobile-cards" id="articles-cards" style="display: none;"></div>
        </div>
        <div id="no-articles" class="empty-state" style="display: none;">
          <h3>No articles yet</h3>
          <p>Add your first article to get started.</p>
        </div>
      </div>
      
      <!-- Videos Management -->
      <div id="videos-admin" class="admin-section">
        <button class="add-btn" onclick="openVideoModal()">
          <i class="fas fa-plus"></i> Add Video
        </button>
        <div id="videos-loading" class="loading">
          <div class="spinner"></div>
          <p>Loading videos...</p>
        </div>
        <div id="videos-content" style="display: none;">
          <table class="data-table" id="videos-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>URL</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="videos-list"></tbody>
          </table>
          <div class="mobile-cards" id="videos-cards" style="display: none;"></div>
        </div>
        <div id="no-videos" class="empty-state" style="display: none;">
          <h3>No videos yet</h3>
          <p>Add your first video to get started.</p>
        </div>
      </div>
      
      <!-- Album Modal -->
      <div id="album-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="album-modal-title">Add Album</h2>
            <button class="close-modal" onclick="closeAlbumModal()">×</button>
          </div>
          <form id="album-form" onsubmit="saveAlbum(event)">
            <input type="hidden" id="album-id">
            <div class="form-group">
              <label>Title *</label>
              <input type="text" id="album-title" required>
            </div>
            <div class="form-group">
              <label>Google Drive Folder ID *</label>
              <input type="text" id="album-folder-id" required placeholder="e.g., 1AbC2DeF3GhI4JkL5MnOp">
              <small>Get this from your Google Drive folder URL</small>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="album-description" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Category</label>
              <select id="album-category">
                <option value="Campus Missions">Campus Missions</option>
                <option value="Street Evangelism">Street Evangelism</option>
                <option value="Hospital Visits">Hospital Visits</option>
                <option value="Market Outreach">Market Outreach</option>
                <option value="Prison Ministry">Prison Ministry</option>
                <option value="Other Events">Other Events</option>
              </select>
            </div>
            <div class="form-group">
              <label>Event Date</label>
              <input type="date" id="album-date">
            </div>
            <div class="form-group">
              <label>Cover Image URL</label>
              <input type="text" id="album-cover" placeholder="https://example.com/image.jpg">
              <small>Leave empty to use default image</small>
            </div>
            <div class="form-buttons">
              <button type="submit" class="save-btn">
                <i class="fas fa-save"></i> Save Album
              </button>
              <button type="button" class="cancel-btn" onclick="closeAlbumModal()">
                <i class="fas fa-times"></i> Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Sermon Modal -->
      <div id="sermon-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="sermon-modal-title">Add Sermon</h2>
            <button class="close-modal" onclick="closeSermonModal()">×</button>
          </div>
          <form id="sermon-form" onsubmit="saveSermon(event)">
            <input type="hidden" id="sermon-id">
            <div class="form-group">
              <label>Title *</label>
              <input type="text" id="sermon-title" required>
            </div>
            <div class="form-group">
              <label>Speaker *</label>
              <input type="text" id="sermon-speaker" required>
            </div>
            <div class="form-group">
              <label>Day (Optional)</label>
              <input type="text" id="sermon-day" placeholder="e.g., Sunday Service">
            </div>
            <div class="form-group">
              <label>Date</label>
              <input type="date" id="sermon-date">
            </div>
            <div class="form-group">
              <label>PDF URL</label>
              <input type="url" id="sermon-pdf" placeholder="https://drive.google.com/file/d/...">
            </div>
            <div class="form-group">
              <label>PPT URL</label>
              <input type="url" id="sermon-ppt" placeholder="https://drive.google.com/file/d/...">
            </div>
            <div class="form-buttons">
              <button type="submit" class="save-btn">
                <i class="fas fa-save"></i> Save Sermon
              </button>
              <button type="button" class="cancel-btn" onclick="closeSermonModal()">
                <i class="fas fa-times"></i> Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Article Modal -->
      <div id="article-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="article-modal-title">Add Article</h2>
            <button class="close-modal" onclick="closeArticleModal()">×</button>
          </div>
          <form id="article-form" onsubmit="saveArticle(event)">
            <input type="hidden" id="article-id">
            <div class="form-group">
              <label>Title *</label>
              <input type="text" id="article-title" required>
            </div>
            <div class="form-group">
              <label>Author *</label>
              <input type="text" id="article-author" required>
            </div>
            <div class="form-group">
              <label>Summary</label>
              <textarea id="article-summary" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Link *</label>
              <input type="url" id="article-link" required placeholder="https://example.com/article">
            </div>
            <div class="form-buttons">
              <button type="submit" class="save-btn">
                <i class="fas fa-save"></i> Save Article
              </button>
              <button type="button" class="cancel-btn" onclick="closeArticleModal()">
                <i class="fas fa-times"></i> Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Video Modal -->
      <div id="video-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="video-modal-title">Add Video</h2>
            <button class="close-modal" onclick="closeVideoModal()">×</button>
          </div>
          <form id="video-form" onsubmit="saveVideo(event)">
            <input type="hidden" id="video-id">
            <div class="form-group">
              <label>Title *</label>
              <input type="text" id="video-title" required>
            </div>
            <div class="form-group">
              <label>YouTube/Vimeo/Video URL *</label>
              <input type="url" id="video-url" required placeholder="https://www.youtube.com/watch?v=VIDEO_ID or https://vimeo.com/VIDEO_ID">
              <small>You can use regular YouTube or Vimeo URLs - they'll be automatically converted to embed format</small>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="video-description" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Date</label>
              <input type="date" id="video-date">
            </div>
            <div class="form-buttons">
              <button type="submit" class="save-btn">
                <i class="fas fa-save"></i> Save Video
              </button>
              <button type="button" class="cancel-btn" onclick="closeVideoModal()">
                <i class="fas fa-times"></i> Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Show message function
    function showMessage(message, type = 'success') {
      const messageDiv = document.getElementById('message');
      messageDiv.textContent = message;
      messageDiv.className = `message ${type}`;
      messageDiv.style.display = 'block';
      
      setTimeout(() => {
        messageDiv.style.display = 'none';
      }, 5000);
    }
    
    // Admin functionality
    function populateMobileCards(type, data) {
      const cardsContainer = document.getElementById(`${type}-cards`);
      if (!cardsContainer) return;
      
      cardsContainer.innerHTML = '';
      
      data.forEach(item => {
        let cardContent = '';
        let actions = '';
        
        if (type === 'albums') {
          const statusClass = item.is_active ? 'status-active' : 'status-inactive';
          const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
          const statusText = item.is_active ? 'Active' : 'Inactive';
          
          cardContent = `
            <div class="card-field">
              <span class="card-label">Title:</span>
              <span class="card-value"><strong>${item.title}</strong></span>
            </div>
            <div class="card-field">
              <span class="card-label">Folder:</span>
              <span class="card-value">${item.folder_id || 'N/A'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Category:</span>
              <span class="card-value">${item.category || 'General'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Date:</span>
              <span class="card-value">${item.event_date || 'Not set'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Status:</span>
              <span class="card-value ${statusClass}"><i class="fas ${statusIcon}"></i> ${statusText}</span>
            </div>
          `;
          
          actions = `
            <button class="action-btn edit-btn" onclick="editAlbum(${item.id})">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="action-btn toggle-btn" onclick="toggleAlbumStatus(${item.id}, ${item.is_active})">
              <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
            </button>
            <button class="action-btn delete-btn" onclick="deleteAlbum(${item.id})">
              <i class="fas fa-trash"></i> Delete
            </button>
          `;
        }
        
        if (type === 'sermons') {
          const statusClass = item.is_active ? 'status-active' : 'status-inactive';
          const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
          const statusText = item.is_active ? 'Active' : 'Inactive';
          
          cardContent = `
            <div class="card-field">
              <span class="card-label">Title:</span>
              <span class="card-value"><strong>${item.title}</strong></span>
            </div>
            <div class="card-field">
              <span class="card-label">Speaker:</span>
              <span class="card-value">${item.speaker || 'Not set'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Date:</span>
              <span class="card-value">${item.date || 'Not set'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Status:</span>
              <span class="card-value ${statusClass}"><i class="fas ${statusIcon}"></i> ${statusText}</span>
            </div>
          `;
          
          actions = `
            <button class="action-btn edit-btn" onclick="editSermon(${item.id})">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="action-btn toggle-btn" onclick="toggleSermonStatus(${item.id}, ${item.is_active})">
              <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
            </button>
            <button class="action-btn delete-btn" onclick="deleteSermon(${item.id})">
              <i class="fas fa-trash"></i> Delete
            </button>
          `;
        }
        
        if (type === 'articles') {
          const statusClass = item.is_active ? 'status-active' : 'status-inactive';
          const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
          const statusText = item.is_active ? 'Active' : 'Inactive';
          
          cardContent = `
            <div class="card-field">
              <span class="card-label">Title:</span>
              <span class="card-value"><strong>${item.title}</strong></span>
            </div>
            <div class="card-field">
              <span class="card-label">Author:</span>
              <span class="card-value">${item.author || 'Not set'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Date:</span>
              <span class="card-value">${item.date_created || 'Not set'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Status:</span>
              <span class="card-value ${statusClass}"><i class="fas ${statusIcon}"></i> ${statusText}</span>
            </div>
          `;
          
          actions = `
            <button class="action-btn edit-btn" onclick="editArticle(${item.id})">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="action-btn toggle-btn" onclick="toggleArticleStatus(${item.id}, ${item.is_active})">
              <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
            </button>
            <button class="action-btn delete-btn" onclick="deleteArticle(${item.id})">
              <i class="fas fa-trash"></i> Delete
            </button>
          `;
        }
        
        if (type === 'videos') {
          const statusClass = item.is_active ? 'status-active' : 'status-inactive';
          const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
          const statusText = item.is_active ? 'Active' : 'Inactive';
          
          cardContent = `
            <div class="card-field">
              <span class="card-label">Title:</span>
              <span class="card-value"><strong>${item.title}</strong></span>
            </div>
            <div class="card-field">
              <span class="card-label">URL:</span>
              <span class="card-value">${item.url?.substring(0, 30)}...</span>
            </div>
            <div class="card-field">
              <span class="card-label">Date:</span>
              <span class="card-value">${item.date || 'Not set'}</span>
            </div>
            <div class="card-field">
              <span class="card-label">Status:</span>
              <span class="card-value ${statusClass}"><i class="fas ${statusIcon}"></i> ${statusText}</span>
            </div>
          `;
          
          actions = `
            <button class="action-btn edit-btn" onclick="editVideo(${item.id})">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="action-btn toggle-btn" onclick="toggleVideoStatus(${item.id}, ${item.is_active})">
              <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
            </button>
            <button class="action-btn delete-btn" onclick="deleteVideo(${item.id})">
              <i class="fas fa-trash"></i> Delete
            </button>
          `;
        }
        
        const card = `
          <div class="data-card">
            <div class="card-header">
              <h4 class="card-title">${item.title || 'Untitled'}</h4>
              <span class="card-id">#${item.id}</span>
            </div>
            <div class="card-content">
              ${cardContent}
            </div>
            <div class="card-actions">
              ${actions}
            </div>
          </div>
        `;
        
        cardsContainer.innerHTML += card;
      });
    }

    // Handle responsive display switching
    function updateResponsiveDisplay() {
      const isMobile = window.innerWidth <= 480;
      const types = ['albums', 'sermons', 'articles', 'videos'];
      
      types.forEach(type => {
        const table = document.getElementById(`${type}-table`);
        const cards = document.getElementById(`${type}-cards`);
        
        if (table && cards) {
          if (isMobile) {
            table.style.display = 'none';
            cards.style.display = 'block';
          } else {
            table.style.display = 'table';
            cards.style.display = 'none';
          }
        }
      });
    }

    // Update display on window resize
    window.addEventListener('resize', updateResponsiveDisplay);
    
    // Initial responsive check
    document.addEventListener('DOMContentLoaded', function() {
      updateResponsiveDisplay();
    });

    function switchAdminTab(tabName) {
      // Update tabs
      document.querySelectorAll('.admin-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.textContent.toLowerCase().includes(tabName)) {
          tab.classList.add('active');
        }
      });
      
      // Update sections
      document.querySelectorAll('.admin-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(`${tabName}-admin`).classList.add('active');
      
      // Load data for tab
      loadAdminData(tabName);
    }
    
    async function loadAdminData(type) {
      try {
        const loadingDiv = document.getElementById(`${type}-loading`);
        const contentDiv = document.getElementById(`${type}-content`);
        const emptyDiv = document.getElementById(`no-${type}`);
        const listDiv = document.getElementById(`${type}-list`);
        
        loadingDiv.style.display = 'block';
        contentDiv.style.display = 'none';
        emptyDiv.style.display = 'none';
        
        const response = await fetch(`helpers/fetch.php?action=${type}`);
        if (!response.ok) {
          throw new Error(`Failed to load ${type}`);
        }
        
        const data = await response.json();
        
        loadingDiv.style.display = 'none';
        
        if (!data || data.length === 0) {
          emptyDiv.style.display = 'block';
          return;
        }
        
        contentDiv.style.display = 'block';
        listDiv.innerHTML = '';
        
        data.forEach(item => {
          let row = '';
          if (type === 'albums') {
            const statusClass = item.is_active ? 'status-active' : 'status-inactive';
            const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
            const statusText = item.is_active ? 'Active' : 'Inactive';
            
            row = `
              <tr>
                <td>${item.id}</td>
                <td><strong>${item.title}</strong></td>
                <td><small class="text-muted">${item.folder_id || 'N/A'}</small></td>
                <td>${item.category || 'General'}</td>
                <td>${item.event_date || 'Not set'}</td>
                <td class="${statusClass}">
                  <i class="fas ${statusIcon}"></i> ${statusText}
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="action-btn edit-btn" onclick="editAlbum(${item.id})">
                      <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="action-btn toggle-btn" onclick="toggleAlbumStatus(${item.id}, ${item.is_active})">
                      <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteAlbum(${item.id})">
                      <i class="fas fa-trash"></i> Delete
                    </button>
                  </div>
                </td>
              </tr>
            `;
          }
          
          if (type === 'sermons') {
            const statusClass = item.is_active ? 'status-active' : 'status-inactive';
            const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
            const statusText = item.is_active ? 'Active' : 'Inactive';
            
            row = `
              <tr>
                <td>${item.id}</td>
                <td><strong>${item.title}</strong></td>
                <td>${item.speaker || 'Not set'}</td>
                <td>${item.date || 'Not set'}</td>
                <td class="${statusClass}">
                  <i class="fas ${statusIcon}"></i> ${statusText}
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="action-btn edit-btn" onclick="editSermon(${item.id})">
                      <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="action-btn toggle-btn" onclick="toggleSermonStatus(${item.id}, ${item.is_active})">
                      <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteSermon(${item.id})">
                      <i class="fas fa-trash"></i> Delete
                    </button>
                  </div>
                </td>
              </tr>
            `;
          }
          
          if (type === 'articles') {
            const statusClass = item.is_active ? 'status-active' : 'status-inactive';
            const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
            const statusText = item.is_active ? 'Active' : 'Inactive';
            
            row = `
              <tr>
                <td>${item.id}</td>
                <td><strong>${item.title}</strong></td>
                <td>${item.author || 'Not set'}</td>
                <td>${item.date_created || 'Not set'}</td>
                <td class="${statusClass}">
                  <i class="fas ${statusIcon}"></i> ${statusText}
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="action-btn edit-btn" onclick="editArticle(${item.id})">
                      <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="action-btn toggle-btn" onclick="toggleArticleStatus(${item.id}, ${item.is_active})">
                      <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteArticle(${item.id})">
                      <i class="fas fa-trash"></i> Delete
                    </button>
                  </div>
                </td>
              </tr>
            `;
          }
          
          if (type === 'videos') {
            const statusClass = item.is_active ? 'status-active' : 'status-inactive';
            const statusIcon = item.is_active ? 'fa-check-circle' : 'fa-times-circle';
            const statusText = item.is_active ? 'Active' : 'Inactive';
            
            row = `
              <tr>
                <td>${item.id}</td>
                <td><strong>${item.title}</strong></td>
                <td><small class="text-muted">${item.url?.substring(0, 30)}...</small></td>
                <td>${item.date || 'Not set'}</td>
                <td class="${statusClass}">
                  <i class="fas ${statusIcon}"></i> ${statusText}
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="action-btn edit-btn" onclick="editVideo(${item.id})">
                      <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="action-btn toggle-btn" onclick="toggleVideoStatus(${item.id}, ${item.is_active})">
                      <i class="fas fa-power-off"></i> ${item.is_active ? 'Deactivate' : 'Activate'}
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteVideo(${item.id})">
                      <i class="fas fa-trash"></i> Delete
                    </button>
                  </div>
                </td>
              </tr>
            `;
          }
          
          listDiv.innerHTML += row;
        });

        // Populate mobile cards for small screens
        populateMobileCards(type, data);
        
      } catch (error) {
        console.error(`Error loading ${type}:`, error);
        document.getElementById(`${type}-loading`).innerHTML = `
          <div class="error-message" style="color: #dc3545; text-align: center;">
            <i class="fas fa-exclamation-triangle fa-2x"></i>
            <h3>Error Loading ${type.charAt(0).toUpperCase() + type.slice(1)}</h3>
            <p>${error.message}</p>
            <button onclick="loadAdminData('${type}')" class="action-btn" style="margin-top: 1rem;">
              <i class="fas fa-redo"></i> Try Again
            </button>
          </div>
        `;
      }
    }
    
    // ========== ALBUM FUNCTIONS ==========
    function openAlbumModal(editId = null) {
      document.getElementById('album-modal-title').textContent = editId ? 'Edit Album' : 'Add Album';
      document.getElementById('album-form').reset();
      document.getElementById('album-id').value = editId || '';
      document.getElementById('album-modal').classList.add('active');
    }
    
    function closeAlbumModal() {
      document.getElementById('album-modal').classList.remove('active');
    }
    
    async function saveAlbum(event) {
      event.preventDefault();
      
      const albumId = document.getElementById('album-id').value;
      const albumData = {
        title: document.getElementById('album-title').value,
        folder_id: document.getElementById('album-folder-id').value,
        description: document.getElementById('album-description').value,
        category: document.getElementById('album-category').value,
        event_date: document.getElementById('album-date').value,
        cover_image: document.getElementById('album-cover').value
      };
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'save_album',
            id: albumId,
            data: albumData
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(result.message || 'Album saved successfully!');
          closeAlbumModal();
          loadAdminData('albums');
        } else {
          showMessage(result.error || 'Failed to save album', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
        console.error('Error saving album:', error);
      }
    }
    
    async function editAlbum(id) {
      try {
        const response = await fetch(`helpers/fetch.php?action=album&id=${id}`);
        const album = await response.json();
        
        if (album) {
          document.getElementById('album-id').value = album.id;
          document.getElementById('album-title').value = album.title;
          document.getElementById('album-folder-id').value = album.folder_id;
          document.getElementById('album-description').value = album.description;
          document.getElementById('album-category').value = album.category;
          document.getElementById('album-date').value = album.event_date;
          document.getElementById('album-cover').value = album.cover_image;
          
          openAlbumModal(id);
        }
      } catch (error) {
        console.error('Error fetching album:', error);
        showMessage('Failed to load album data', 'error');
      }
    }
    
    async function toggleAlbumStatus(id, currentStatus) {
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'toggle_album_status',
            id: id,
            status: !currentStatus
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(`Album ${!currentStatus ? 'activated' : 'deactivated'} successfully!`);
          loadAdminData('albums');
        } else {
          showMessage(result.error || 'Failed to update album status', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      }
    }
    
    async function deleteAlbum(id) {
      if (!confirm('Are you sure you want to delete this album? This action cannot be undone.')) {
        return;
      }
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'delete_album',
            id: id
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage('Album deleted successfully!');
          loadAdminData('albums');
        } else {
          showMessage(result.error || 'Failed to delete album', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      }
    }
    
    async function toggleVideoStatus(id, currentStatus) {
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'toggle_video_status',
            id: id,
            status: !currentStatus
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(`Video ${!currentStatus ? 'activated' : 'deactivated'} successfully!`);
          loadAdminData('videos');
        } else {
          showMessage(result.error || 'Failed to update video status', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      }
    }
    
    async function deleteVideo(id) {
      if (!confirm('Are you sure you want to delete this video? This action cannot be undone.')) {
        return;
      }
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'delete_video',
            id: id
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage('Video deleted successfully!');
          loadAdminData('videos');
        } else {
          showMessage(result.error || 'Failed to delete video', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      }
    }
    
    async function editVideo(id) {
      try {
        const response = await fetch(`helpers/fetch.php?action=video&id=${id}`);
        const video = await response.json();
        
        if (video) {
          document.getElementById('video-id').value = video.id;
          document.getElementById('video-title').value = video.title;
          document.getElementById('video-url').value = video.url;
          document.getElementById('video-description').value = video.description;
          document.getElementById('video-date').value = video.date;
          
          openVideoModal(id);
        }
      } catch (error) {
        console.error('Error fetching video:', error);
        showMessage('Failed to load video data', 'error');
      }
    }
    
    // ========== SERMON FUNCTIONS ==========
    function openSermonModal(editId = null) {
      document.getElementById('sermon-modal-title').textContent = editId ? 'Edit Sermon' : 'Add Sermon';
      document.getElementById('sermon-form').reset();
      document.getElementById('sermon-id').value = editId || '';
      document.getElementById('sermon-modal').classList.add('active');
    }
    
    function closeSermonModal() {
      document.getElementById('sermon-modal').classList.remove('active');
    }
    
    async function saveSermon(event) {
      event.preventDefault();
      
      const sermonId = document.getElementById('sermon-id').value;
      const sermonData = {
        title: document.getElementById('sermon-title').value,
        speaker: document.getElementById('sermon-speaker').value,
        day: document.getElementById('sermon-day').value,
        date: document.getElementById('sermon-date').value,
        pdf_url: document.getElementById('sermon-pdf').value,
        ppt_url: document.getElementById('sermon-ppt').value
      };
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'save_sermon',
            id: sermonId,
            data: sermonData
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(result.message || 'Sermon saved successfully!');
          closeSermonModal();
          loadAdminData('sermons');
        } else {
          showMessage(result.error || 'Failed to save sermon', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
        console.error('Error saving sermon:', error);
      }
    }
    
    async function editSermon(id) {
      try {
        const response = await fetch(`helpers/fetch.php?action=sermon&id=${id}`);
        const sermon = await response.json();
        
        if (sermon) {
          document.getElementById('sermon-id').value = sermon.id;
          document.getElementById('sermon-title').value = sermon.title;
          document.getElementById('sermon-speaker').value = sermon.speaker;
          document.getElementById('sermon-day').value = sermon.day;
          document.getElementById('sermon-date').value = sermon.date;
          document.getElementById('sermon-pdf').value = sermon.pdf_url;
          document.getElementById('sermon-ppt').value = sermon.ppt_url;
          
          openSermonModal(id);
        }
      } catch (error) {
        console.error('Error fetching sermon:', error);
        showMessage('Failed to load sermon data', 'error');
      }
    }
    
    async function toggleSermonStatus(id, currentStatus) {
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'toggle_sermon_status',
            id: id,
            status: !currentStatus
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(`Sermon ${!currentStatus ? 'activated' : 'deactivated'} successfully!`);
          loadAdminData('sermons');
        } else {
          showMessage(result.error || 'Failed to update sermon status', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      }
    }
    
    async function deleteSermon(id) {
      if (!confirm('Are you sure you want to delete this sermon? This action cannot be undone.')) {
        return;
      }
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'delete_sermon',
            id: id
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage('Sermon deleted successfully!');
          loadAdminData('sermons');
        } else {
          showMessage(result.error || 'Failed to delete sermon', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      }
    }
    
    // ========== ARTICLE FUNCTIONS ==========
    function openArticleModal(editId = null) {
      document.getElementById('article-modal-title').textContent = editId ? 'Edit Article' : 'Add Article';
      document.getElementById('article-form').reset();
      document.getElementById('article-id').value = editId || '';
      document.getElementById('article-modal').classList.add('active');
    }
    
    function closeArticleModal() {
      document.getElementById('article-modal').classList.remove('active');
    }
    
    async function saveArticle(event) {
      event.preventDefault();
      
      const articleId = document.getElementById('article-id').value;
      const articleData = {
        title: document.getElementById('article-title').value,
        author: document.getElementById('article-author').value,
        summary: document.getElementById('article-summary').value,
        link: document.getElementById('article-link').value
      };
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'save_article',
            id: articleId,
            data: articleData
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(result.message || 'Article saved successfully!');
          closeArticleModal();
          loadAdminData('articles');
        } else {
          showMessage(result.error || 'Failed to save article', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
        console.error('Error saving article:', error);
      }
    }
    
    // ========== VIDEO FUNCTIONS ==========
    function openVideoModal(editId = null) {
      document.getElementById('video-modal-title').textContent = editId ? 'Edit Video' : 'Add Video';
      document.getElementById('video-form').reset();
      document.getElementById('video-id').value = editId || '';
      document.getElementById('video-modal').classList.add('active');
    }
    
    function closeVideoModal() {
      document.getElementById('video-modal').classList.remove('active');
    }
    
    async function saveVideo(event) {
      event.preventDefault();
      
      const videoId = document.getElementById('video-id').value;
      const videoData = {
        title: document.getElementById('video-title').value,
        url: document.getElementById('video-url').value,
        description: document.getElementById('video-description').value,
        date: document.getElementById('video-date').value
      };
      
      try {
        const response = await fetch('helpers/save.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action: 'save_video',
            id: videoId,
            data: videoData
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showMessage(result.message || 'Video saved successfully!');
          closeVideoModal();
          loadAdminData('videos');
        } else {
          showMessage(result.error || 'Failed to save video', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
        console.error('Error saving video:', error);
      }
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      loadAdminData('albums');
    });
  </script>
  </div> <!-- End admin-content -->
  
  <script>
    // Navigation Menu Toggle
    function toggleMenu() {
      const navMenu = document.querySelector('.nav-menu');
      const hamburger = document.querySelector('.hamburger');
      
      navMenu.classList.toggle('active');
      hamburger.classList.toggle('active');
    }

    // Close menu when clicking outside or on a link
    document.addEventListener('click', function(event) {
      const navMenu = document.querySelector('.nav-menu');
      const hamburger = document.querySelector('.hamburger');
      
      if (!event.target.closest('.nav-container') && navMenu.classList.contains('active')) {
        navMenu.classList.remove('active');
        hamburger.classList.remove('active');
      }
    });

    // Close menu when clicking on nav links
    document.querySelectorAll('.nav-menu a').forEach(link => {
      link.addEventListener('click', function() {
        const navMenu = document.querySelector('.nav-menu');
        const hamburger = document.querySelector('.hamburger');
        
        navMenu.classList.remove('active');
        hamburger.classList.remove('active');
      });
    });

    // Admin Login Functionality
    document.addEventListener('DOMContentLoaded', function() {
      const loginModal = document.getElementById('admin-login-modal');
      const adminContent = document.getElementById('admin-content');
      const loginBtn = document.getElementById('admin-login-btn');
      const passwordInput = document.getElementById('admin-password');
      const loginError = document.getElementById('login-error');

      // Check if already logged in (using sessionStorage)
      if (sessionStorage.getItem('adminAuthenticated') === 'true') {
        loginModal.style.display = 'none';
        adminContent.style.display = 'block';
        return;
      }

      // Focus on password input when modal is shown
      passwordInput.focus();

      loginBtn.addEventListener('click', async function() {
        const password = passwordInput.value.trim();

        // Clear previous error
        loginError.style.display = 'none';
        loginError.textContent = '';

        // Basic validation
        if (!password) {
          showLoginError('Please enter a password.');
          passwordInput.focus();
          return;
        }

        // Show loading state
        loginBtn.classList.add('loading');
        loginBtn.disabled = true;
        loginBtn.textContent = 'Authenticating...';

        try {
          // Simulate network delay for better UX (optional)
          await new Promise(resolve => setTimeout(resolve, 500));

          // Simple password check (you can change this password)
          if (password === 'weso2024admin') {
            sessionStorage.setItem('adminAuthenticated', 'true');
            loginModal.style.display = 'none';
            adminContent.style.display = 'block';
            loginError.style.display = 'none';

            // Announce successful login for screen readers
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.textContent = 'Login successful. Admin panel loaded.';
            document.body.appendChild(announcement);
            setTimeout(() => document.body.removeChild(announcement), 1000);
          } else {
            showLoginError('Incorrect password. Please try again.');
            passwordInput.focus();
            passwordInput.select();
          }
        } catch (error) {
          showLoginError('An error occurred. Please try again.');
          console.error('Login error:', error);
        } finally {
          // Reset loading state
          loginBtn.classList.remove('loading');
          loginBtn.disabled = false;
          loginBtn.textContent = 'Access Admin Panel';
        }
      });

      // Allow Enter key to submit
      passwordInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          loginBtn.click();
        }
      });

      // Clear error when user starts typing
      passwordInput.addEventListener('input', function() {
        if (loginError.style.display !== 'none') {
          loginError.style.display = 'none';
        }
      });

      function showLoginError(message) {
        loginError.textContent = message;
        loginError.style.display = 'block';
        loginError.style.color = '#dc3545';
        loginError.style.fontSize = '0.9rem';
        loginError.style.marginTop = '10px';
        loginError.style.textAlign = 'center';
      }
    });
  </script>
  </script>
</body>
</html>